<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>dxplugin.C Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>dxplugin.C</h1><a href="dxplugin_8C.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment"> *cr</font>
00003 <font class="comment"> *cr            (C) Copyright 1995-2006 The Board of Trustees of the</font>
00004 <font class="comment"> *cr                        University of Illinois</font>
00005 <font class="comment"> *cr                         All Rights Reserved</font>
00006 <font class="comment"> *cr</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> * RCS INFORMATION:</font>
00011 <font class="comment"> *</font>
00012 <font class="comment"> *      $RCSfile: dxplugin.C,v $</font>
00013 <font class="comment"> *      $Author: johns $       $Locker:  $             $State: Exp $</font>
00014 <font class="comment"> *      $Revision: 1.21 $       $Date: 2006/02/23 19:36:44 $</font>
00015 <font class="comment"> *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">/* </font>
00019 <font class="comment"> * DX potential maps</font>
00020 <font class="comment"> *</font>
00021 <font class="comment"> * Format of the file is:</font>
00022 <font class="comment"> * # Comments</font>
00023 <font class="comment"> * .</font>
00024 <font class="comment"> * .</font>
00025 <font class="comment"> * .</font>
00026 <font class="comment"> * object 1 class gridpositions counts xn yn zn</font>
00027 <font class="comment"> * origin xorg yorg zorg</font>
00028 <font class="comment"> * delta xdel 0 0</font>
00029 <font class="comment"> * delta 0 ydel 0</font>
00030 <font class="comment"> * delta 0 0 zdel</font>
00031 <font class="comment"> * object 2 class gridconnections counts xn yn zn</font>
00032 <font class="comment"> * object 3 class array type double rank 0 items [ xn*yn*zn ] data follows</font>
00033 <font class="comment"> * f1 f2 f3</font>
00034 <font class="comment"> * f4 f5 f6</font>
00035 <font class="comment"> * .</font>
00036 <font class="comment"> * .</font>
00037 <font class="comment"> * .</font>
00038 <font class="comment"> * object "Dataset name" class field</font>
00039 <font class="comment"> </font>
00040 <font class="comment"> * Where xn, yn, and zn are the number of data points along each axis;</font>
00041 <font class="comment"> * xorg, yorg, and zorg is the origin of the grid, in angstroms;</font>
00042 <font class="comment"> * xdel, ydel, and zdel are the scaling factors to convert grid units to</font>
00043 <font class="comment"> * angstroms.</font>
00044 <font class="comment"> * Grid data follows, with three values per line, ordered z fast, y medium,</font>
00045 <font class="comment"> * and x slow.</font>
00046 <font class="comment"> *</font>
00047 <font class="comment"> * Note: this plugin was written to read the OpenDX files created by the</font>
00048 <font class="comment"> * APBS program, and may not support all of the features in the file format.</font>
00049 <font class="comment"> *</font>
00050 <font class="comment"> */</font>
00051 
00052 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00053 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00054 <font class="preprocessor">#include &lt;ctype.h&gt;</font>
00055 <font class="preprocessor">#include &lt;math.h&gt;</font>
00056 <font class="preprocessor">#include &lt;string.h&gt;</font>
00057 
00058 <font class="preprocessor">#if defined(_AIX)</font>
00059 <font class="preprocessor"></font><font class="preprocessor">#include &lt;strings.h&gt;</font>
00060 <font class="preprocessor">#endif</font>
00061 <font class="preprocessor"></font>
00062 <font class="preprocessor">#if defined(WIN32) || defined(WIN64)</font>
00063 <font class="preprocessor"></font><font class="preprocessor">#define strcasecmp  stricmp</font>
00064 <font class="preprocessor"></font><font class="preprocessor">#define strncasecmp strnicmp</font>
00065 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00066 <font class="preprocessor"></font>
00067 <font class="preprocessor">#include "<a class="code" href="molfile__plugin_8h.html">molfile_plugin.h</a>"</font>
00068 
<a name="l00069"></a><a class="code" href="dxplugin_8C.html#a0">00069</a> <font class="preprocessor">#define LINESIZE 85</font>
00070 <font class="preprocessor"></font>
<a name="l00071"></a><a class="code" href="structdx__t.html">00071</a> <font class="keyword">typedef</font> <font class="keyword">struct </font>{
<a name="l00072"></a><a class="code" href="structdx__t.html#m0">00072</a>   FILE *fd;
<a name="l00073"></a><a class="code" href="structdx__t.html#m1">00073</a>   <font class="keywordtype">int</font> nsets;
<a name="l00074"></a><a class="code" href="structdx__t.html#m2">00074</a>   <a class="code" href="structmolfile__volumetric__t.html">molfile_volumetric_t</a> *vol;
00075 } <a class="code" href="structdx__t.html">dx_t</a>;
00076 
00077 
00078 <font class="comment">// Get a string from a stream, printing any errors that occur</font>
<a name="l00079"></a><a class="code" href="dxplugin_8C.html#a2">00079</a> <font class="keyword">static</font> <font class="keywordtype">char</font> *<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(<font class="keywordtype">char</font> *s, <font class="keywordtype">int</font> n, FILE *stream) {
00080   <font class="keywordtype">char</font> *returnVal;
00081 
00082   <font class="keywordflow">if</font> (feof(stream)) {
00083     fprintf(stderr, <font class="stringliteral">"Unexpected end-of-file.\n"</font>);
00084     <font class="keywordflow">return</font> NULL;
00085   } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (ferror(stream)) {
00086     fprintf(stderr, <font class="stringliteral">"Error reading file.\n"</font>);
00087     <font class="keywordflow">return</font> NULL;
00088   } <font class="keywordflow">else</font> {
00089     returnVal = fgets(s, n, stream);
00090     <font class="keywordflow">if</font> (returnVal == NULL) {
00091       fprintf(stderr, <font class="stringliteral">"Error reading line.\n"</font>);
00092     }
00093   }
00094 
00095   <font class="keywordflow">return</font> returnVal;
00096 }
00097 
00098 
<a name="l00099"></a><a class="code" href="dxplugin_8C.html#a3">00099</a> <font class="keyword">static</font> <font class="keywordtype">void</font> *<a class="code" href="dxplugin_8C.html#a3">open_dx_read</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *filepath, <font class="keyword">const</font> <font class="keywordtype">char</font> *filetype,
00100     <font class="keywordtype">int</font> *natoms) {
00101   FILE *fd;
00102   <a class="code" href="structdx__t.html">dx_t</a> *dx;
00103   <font class="keywordtype">char</font> inbuf[<a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>];
00104   <font class="keywordtype">int</font> xsize, ysize, zsize;
00105   <font class="keywordtype">float</font> orig[3], xdelta[3], ydelta[3], zdelta[3];
00106   
00107   fd = fopen(filepath, <font class="stringliteral">"rb"</font>);
00108   <font class="keywordflow">if</font> (!fd) {
00109     fprintf(stderr, <font class="stringliteral">"Error opening file.\n"</font>);
00110     <font class="keywordflow">return</font> NULL;
00111   }
00112 
00113   <font class="comment">/* skip comments */</font>
00114   <font class="keywordflow">do</font> {
00115     <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL) 
00116       <font class="keywordflow">return</font> NULL;
00117   } <font class="keywordflow">while</font> (inbuf[0] == <font class="charliteral">'#'</font>);
00118 
00119   <font class="comment">/* get the number of grid points */</font>
00120   <font class="keywordflow">if</font> (sscanf(inbuf, <font class="stringliteral">"object 1 class gridpositions counts %d %d %d"</font>, &amp;xsize, &amp;ysize, &amp;zsize) != 3) {
00121     fprintf(stderr, <font class="stringliteral">"Error reading grid dimensions.\n"</font>);
00122     <font class="keywordflow">return</font> NULL;
00123   }
00124 
00125   <font class="comment">/* get the cell origin */</font>
00126   <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL) {
00127     <font class="keywordflow">return</font> NULL;
00128   }
00129   <font class="keywordflow">if</font> (sscanf(inbuf, <font class="stringliteral">"origin %e %e %e"</font>, orig, orig+1, orig+2) != 3) {
00130     fprintf(stderr, <font class="stringliteral">"Error reading grid origin.\n"</font>);
00131     <font class="keywordflow">return</font> NULL;
00132   }
00133 
00134   <font class="comment">/* get the cell dimensions */</font>
00135   <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL) {
00136     <font class="keywordflow">return</font> NULL;
00137   }
00138   <font class="keywordflow">if</font> (sscanf(inbuf, <font class="stringliteral">"delta %e %e %e"</font>, xdelta, xdelta+1, xdelta+2) != 3) {
00139     fprintf(stderr, <font class="stringliteral">"Error reading cell x-dimension.\n"</font>);
00140     <font class="keywordflow">return</font> NULL;
00141   }
00142 
00143   <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL) {
00144     <font class="keywordflow">return</font> NULL;
00145   }
00146   <font class="keywordflow">if</font> (sscanf(inbuf, <font class="stringliteral">"delta %e %e %e"</font>, ydelta, ydelta+1, ydelta+2) != 3) {
00147     fprintf(stderr, <font class="stringliteral">"Error reading cell y-dimension.\n"</font>);
00148     <font class="keywordflow">return</font> NULL;
00149   }
00150 
00151   <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL) {
00152     <font class="keywordflow">return</font> NULL;
00153   }
00154   <font class="keywordflow">if</font> (sscanf(inbuf, <font class="stringliteral">"delta %e %e %e"</font>, zdelta, zdelta+1, zdelta+2) != 3) {
00155     fprintf(stderr, <font class="stringliteral">"Error reading cell z-dimension.\n"</font>);
00156     <font class="keywordflow">return</font> NULL;
00157   }
00158 
00159   <font class="comment">/* skip the last two lines of the header (described at the beginning of</font>
00160 <font class="comment">   * the code), which aren't utilized by APBS-produced DX files.  */</font>
00161   <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL) 
00162     <font class="keywordflow">return</font> NULL;
00163   <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL)
00164     <font class="keywordflow">return</font> NULL;
00165  
00166   <font class="comment">/* allocate and initialize the dx structure */</font>
00167   dx = <font class="keyword">new</font> <a class="code" href="structdx__t.html">dx_t</a>;
00168   dx-&gt;<a class="code" href="structdx__t.html#m0">fd</a> = fd;
00169   dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a> = NULL;
00170   *natoms = <a class="code" href="molfile__plugin_8h.html#a7">MOLFILE_NUMATOMS_NONE</a>;
00171   dx-&gt;<a class="code" href="structdx__t.html#m1">nsets</a> = 1; <font class="comment">/* this file contains only one data set */</font>
00172 
00173   dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a> = <font class="keyword">new</font> <a class="code" href="structmolfile__volumetric__t.html">molfile_volumetric_t</a>[1];
00174   strcpy(dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m0">dataname</a>, <font class="stringliteral">"DX map"</font>);
00175 
00176   <font class="comment">/* Set the unit cell origin and basis vectors */</font>
00177   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;3; i++) {
00178     dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m1">origin</a>[i] = orig[i];
00179     dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m2">xaxis</a>[i] = xdelta[i] * (xsize-1);
00180     dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m3">yaxis</a>[i] = ydelta[i] * (ysize-1);
00181     dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m4">zaxis</a>[i] = zdelta[i] * (zsize-1);
00182   }
00183 
00184   dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m5">xsize</a> = xsize;
00185   dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m6">ysize</a> = ysize;
00186   dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m7">zsize</a> = zsize;
00187 
00188   <font class="comment">/* DX files contain no color information. Taken from edmplugin.C */</font>
00189   dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m8">has_color</a> = 0;
00190 
00191   <font class="keywordflow">return</font> dx;
00192 }
00193 
<a name="l00194"></a><a class="code" href="dxplugin_8C.html#a4">00194</a> <font class="keyword">static</font> <font class="keywordtype">int</font> <a class="code" href="dxplugin_8C.html#a4">read_dx_metadata</a>(<font class="keywordtype">void</font> *v, <font class="keywordtype">int</font> *nsets, 
00195   <a class="code" href="structmolfile__volumetric__t.html">molfile_volumetric_t</a> **metadata) {
00196   <a class="code" href="structdx__t.html">dx_t</a> *dx = (<a class="code" href="structdx__t.html">dx_t</a> *)v;
00197   *nsets = dx-&gt;<a class="code" href="structdx__t.html#m1">nsets</a>; 
00198   *metadata = dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>;  
00199 
00200   <font class="keywordflow">return</font> <a class="code" href="molfile__plugin_8h.html#a2">MOLFILE_SUCCESS</a>;
00201 }
00202 
<a name="l00203"></a><a class="code" href="dxplugin_8C.html#a5">00203</a> <font class="keyword">static</font> <font class="keywordtype">int</font> <a class="code" href="dxplugin_8C.html#a5">read_dx_data</a>(<font class="keywordtype">void</font> *v, <font class="keywordtype">int</font> set, <font class="keywordtype">float</font> *datablock,
00204                          <font class="keywordtype">float</font> *colorblock) {
00205   <a class="code" href="structdx__t.html">dx_t</a> *dx = (<a class="code" href="structdx__t.html">dx_t</a> *)v;
00206   FILE *fd = dx-&gt;<a class="code" href="structdx__t.html#m0">fd</a>;
00207   <font class="keywordtype">char</font> inbuf[<a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>];
00208   <font class="keywordtype">float</font> grid[3];
00209   <font class="keywordtype">int</font> x, y, z, xsize, ysize, zsize, xysize, count, total, i;
00210 
00211   xsize = dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m5">xsize</a>;
00212   ysize = dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m6">ysize</a>;
00213   zsize = dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m7">zsize</a>;
00214   xysize = xsize * ysize;
00215   total = xysize * zsize;
00216 
00217   <font class="comment">/* Read the values from the file */</font>
00218   x = y = z = 0;
00219   <font class="keywordflow">for</font> (count = 0; count &lt; total/3; count++) {
00220     <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL )
00221       <font class="keywordflow">return</font> <a class="code" href="molfile__plugin_8h.html#a4">MOLFILE_ERROR</a>;
00222     <font class="keywordflow">if</font> (sscanf(inbuf, <font class="stringliteral">"%e %e %e"</font>, &amp;grid[0], &amp;grid[1], &amp;grid[2]) != 3) {
00223       fprintf(stderr, <font class="stringliteral">"Error reading grid data.\n"</font>);
00224       <font class="keywordflow">return</font> <a class="code" href="molfile__plugin_8h.html#a4">MOLFILE_ERROR</a>;
00225     }
00226 
00227     <font class="keywordflow">for</font> (i = 0; i &lt; 3; i++) { 
00228       datablock[x + y*xsize + z*xysize] = grid[i];
00229       z++;
00230       <font class="keywordflow">if</font> (z &gt;= zsize) {
00231         z = 0;
00232         y++;
00233         <font class="keywordflow">if</font> (y &gt;= ysize) {
00234           y = 0;
00235           x++;
00236         }
00237       }
00238     }
00239   }
00240 
00241   <font class="keywordflow">if</font> ((total%3) != 0) {
00242     <font class="keywordflow">if</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, fd) == NULL )
00243       <font class="keywordflow">return</font> <a class="code" href="molfile__plugin_8h.html#a4">MOLFILE_ERROR</a>;
00244 
00245     count = sscanf(inbuf, <font class="stringliteral">"%e %e %e"</font>, &amp;grid[0], &amp;grid[1], &amp;grid[2]);
00246     <font class="keywordflow">if</font> (count != (total%3)) {
00247       fprintf(stderr, <font class="stringliteral">"Error: incorrect number of data points.\n"</font>);
00248       <font class="keywordflow">return</font> <a class="code" href="molfile__plugin_8h.html#a4">MOLFILE_ERROR</a>;
00249     }
00250 
00251     <font class="keywordflow">for</font> (i = 0; i &lt; count; i++) {
00252       datablock[x + y*xsize + z*xysize] = grid[i];
00253       z++;
00254     }
00255   }
00256   
00257   <font class="keywordtype">char</font> dxname[256];
00258   <font class="keywordflow">while</font> (<a class="code" href="dxplugin_8C.html#a2">dxgets</a>(inbuf, <a class="code" href="dxplugin_8C.html#a0">LINESIZE</a>, dx-&gt;<a class="code" href="structdx__t.html#m0">fd</a>)) {
00259     <font class="keywordflow">if</font> (sscanf(inbuf, <font class="stringliteral">"object \"%[^\"]\" class field"</font>, dxname) == 1) {
00260       <font class="comment">// a dataset name has been found; override the default</font>
00261       strcpy(dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>[0].<a class="code" href="structmolfile__volumetric__t.html#m0">dataname</a>, dxname);
00262       <font class="keywordflow">break</font>;
00263     }
00264   }
00265 
00266   <font class="keywordflow">return</font> <a class="code" href="molfile__plugin_8h.html#a2">MOLFILE_SUCCESS</a>;
00267 }
00268 
<a name="l00269"></a><a class="code" href="dxplugin_8C.html#a6">00269</a> <font class="keyword">static</font> <font class="keywordtype">void</font> <a class="code" href="dxplugin_8C.html#a6">close_dx_read</a>(<font class="keywordtype">void</font> *v) {
00270   <a class="code" href="structdx__t.html">dx_t</a> *dx = (<a class="code" href="structdx__t.html">dx_t</a> *)v;
00271   
00272   fclose(dx-&gt;<a class="code" href="structdx__t.html#m0">fd</a>);
00273   <font class="keywordflow">if</font> (dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a> != NULL)
00274     <font class="keyword">delete</font> [] dx-&gt;<a class="code" href="structdx__t.html#m2">vol</a>; 
00275   <font class="keyword">delete</font> dx;
00276 }
00277 
00278 <font class="comment">/*</font>
00279 <font class="comment"> * Initialization stuff here</font>
00280 <font class="comment"> */</font>
<a name="l00281"></a><a class="code" href="dxplugin_8C.html#a1">00281</a> <font class="keyword">static</font> <a class="code" href="structmolfile__plugin__t.html">molfile_plugin_t</a> <a class="code" href="dxplugin_8C.html#a1">plugin</a> = {
00282   <a class="code" href="vmdplugin_8h.html#a10">vmdplugin_ABIVERSION</a>,   <font class="comment">/* ABI version */</font>
00283   <a class="code" href="molfile__plugin_8h.html#a0">MOLFILE_PLUGIN_TYPE</a>,    <font class="comment">/* plugin type */</font>
00284   <font class="stringliteral">"dx"</font>,                   <font class="comment">/* short file format description */</font>
00285   <font class="stringliteral">"DX"</font>,                   <font class="comment">/* pretty file format description */</font>
00286   <font class="stringliteral">"Eamon Caddigan"</font>,       <font class="comment">/* author(s) */</font>
00287   0,                      <font class="comment">/* major version */</font>
00288   6,                      <font class="comment">/* minor version */</font>
00289   <a class="code" href="vmdplugin_8h.html#a12">VMDPLUGIN_THREADSAFE</a>,   <font class="comment">/* is reentrant */</font>
00290   <font class="stringliteral">"dx"</font>                    <font class="comment">/* filename extension */</font>
00291 };
00292 
<a name="l00293"></a><a class="code" href="dxplugin_8C.html#a7">00293</a> <a class="code" href="vmdplugin_8h.html#a7">VMDPLUGIN_API</a> <font class="keywordtype">int</font> <a class="code" href="vmdplugin_8h.html#a5">VMDPLUGIN_init</a>(<font class="keywordtype">void</font>) { <font class="keywordflow">return</font> <a class="code" href="vmdplugin_8h.html#a13">VMDPLUGIN_SUCCESS</a>; }
<a name="l00294"></a><a class="code" href="dxplugin_8C.html#a8">00294</a> <a class="code" href="vmdplugin_8h.html#a7">VMDPLUGIN_API</a> <font class="keywordtype">int</font> <a class="code" href="vmdplugin_8h.html#a6">VMDPLUGIN_fini</a>(<font class="keywordtype">void</font>) { <font class="keywordflow">return</font> <a class="code" href="vmdplugin_8h.html#a13">VMDPLUGIN_SUCCESS</a>; }
<a name="l00295"></a><a class="code" href="dxplugin_8C.html#a9">00295</a> <a class="code" href="vmdplugin_8h.html#a7">VMDPLUGIN_API</a> <font class="keywordtype">int</font> <a class="code" href="vmdplugin_8h.html#a3">VMDPLUGIN_register</a>(<font class="keywordtype">void</font> *v, <a class="code" href="vmdplugin_8h.html#a15">vmdplugin_register_cb</a> cb) {
00296   plugin.<a class="code" href="structmolfile__plugin__t.html#m1">open_file_read</a> = <a class="code" href="dxplugin_8C.html#a3">open_dx_read</a>;
00297   plugin.<a class="code" href="structmolfile__plugin__t.html#m10">read_volumetric_metadata</a> = <a class="code" href="dxplugin_8C.html#a4">read_dx_metadata</a>;
00298   plugin.<a class="code" href="structmolfile__plugin__t.html#m11">read_volumetric_data</a> = <a class="code" href="dxplugin_8C.html#a5">read_dx_data</a>;
00299   plugin.<a class="code" href="structmolfile__plugin__t.html#m5">close_file_read</a> = <a class="code" href="dxplugin_8C.html#a6">close_dx_read</a>;
00300   (*cb)(v, (<a class="code" href="structvmdplugin__t.html">vmdplugin_t</a> *)&amp;plugin);
00301   <font class="keywordflow">return</font> <a class="code" href="vmdplugin_8h.html#a13">VMDPLUGIN_SUCCESS</a>;
00302 }
00303 
</pre></div><hr><address><small>Generated on Wed Mar 22 13:15:29 2006 for VMD Plugins (current) by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
