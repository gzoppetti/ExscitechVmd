<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
  <LINK REL="stylesheet" HREF="http://physiology.med.cornell.edu/resources/physbio.css" TYPE="text/css">
  <LINK REL="stylesheet" HREF="http://physiology.med.cornell.edu/faculty/hweinstein/vmdplugins/vmd.css" TYPE="text/css">
  <LINK REL="stylesheet" HREF="vmdbackup.css" TYPE="text/css">
  <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
  <TITLE>RMSDTT plugin for VMD</TITLE>
  <META NAME="AUTHOR" CONTENT="Luis Gracia">
</HEAD>
<BODY LANG="en-US">

<TABLE WIDTH=750 ALIGN=center>
<TR><TD><A HREF="http://physiology.med.cornell.edu/"><IMG SRC="http://physiology.med.cornell.edu/images/header.jpg" BORDER=0 ALT="physiology"></A></TD></TR>
<TR><TD>

<H4><A HREF="http://physiology.med.cornell.edu/faculty/hweinstein/vmdplugins/index.html">VMD plugins at WMC Physiology & Biophysics</A></H4>
<H1>RMSDTT: RMSD Trajectory Tool v2.0</H1>

<H3>
<A HREF="#description">Description</A> |
<A HREF="#options">Options</A> |
<A HREF="#download">Download</A> |
<A HREF="#install">Installation</A> |
<A HREF="#author">Author</A>
</H3>

<H2><A NAME="description">Description</A></H2>

<P>The RMSDTT plugin adds support for rmsd calculations and alignment of trajectories to the <A HREF="http://www.ks.uiuc.edu/Research/vmd/plugins/rmsd/">RMSD Tool</A> plugin. Other feature added include:</P>
<UL>
  <LI>Plotting data via the Multiplot VMD plugin (in all systems), Xmgrace (on unix systems) or MS Excel (on windows).
  <LI>Saving data to a file.
  <LI>Swapping equivalent atoms (i.e. Glu OE1 and OE2) to reduce RMSD.
  <LI>Statistics (average, standard deviation, minima and maxima).
  <LI>Multi-line atoms selection with support for comments.
</UL>

<P>The RMSDTT plugin is now distributed as part of <A HREF="http://www.ks.uiuc.edu/Research/vmd">VMD</A> since version 1.8.4 (to be released shortly). Development snapshots of the RMSDTT plugin can be obtained <A HREF="http://physiology.med.cornell.edu/faculty/hweinstein/vmdplugins/rmsdtt/index.html">here</A>.
</P>

<P>As an example, in the following figure the RMSD of the trace of minimized structure <EM>min</EM> and trajectories <EM>equilibration</EM> and <EM>md</EM> are calculated with the <EM>xray</EM> structure as reference (<EM>top</EM> molecule). Statistics for each molecule and totals are shown in the table. In addition a plot was requested (plot not shown). Note how lines can be commented in the atom selection box.</P>

<P><CENTER><IMG SRC="rmsdtt_2.0.png" NAME="rmsdtt" BORDER=0></CENTER></P>

<DIV CLASS="options">
<H2><A NAME="options">Options</A></H2>
<UL>
  <LI><B><EM>Menu:</EM></B>
  <UL>
    <LI><B><EM>File:</EM></B> the RMSD values can be plotted or saved to file after the calculation (options <B><EM>Save data</EM></B> and <B><EM>Plot data</EM></B>) or during the calculation (through <EM>plot</EM> and <EM>save to file</EM> options in the main window). Do not change the <EM>trajectory</EM> options in the main window for this to work (except the <EM>Time</EM> options, which can be changed). <B><EM>Save summary</EM></B> will save the summary of the data as it appears in the table to file.
    <LI>The <B><EM>Options</EM></B> menu allows you to select different programs for plotting, to change the definition of the backbone, switch on/off the output of statistics, and color the table by molecule number (the table will only be colored if this switch in on and the plot option is on during the calculation).
  </UL>

  <LI><B><EM>Atoms selection:</EM></B>
  <UL>
    <LI><B><EM>Multi-line atoms selection box</EM></B>. The selection can be split in different lines. The character <B><EM>'#'</EM></B> can be used to comment out a portion of the selection, namely from the '#' to the end of that line (see figure above).
    <LI><B><EM>trace</EM></B> will add 'and name CA' to the atoms selection.
    <LI><B><EM>backbone</EM></B> will add 'and name C CA N' (default) or 'and name C CA N O' to the atoms selection. The backbone definition to use can be choose from menu (<EM>Options | Backbone def...</EM>).
    <LI><B><EM>noh</EM></B> will exclude hydrogens from the atoms selection (adds 'and noh' to the atoms selection).
    <LI><B><EM>history</EM></B> is a drop down menu of previously used selections. It is updated when pressing <EM>RMSD</EM> (not anymore by pressing <EM>Return</EM>).
  </UL>

  <LI><B><EM>Swapping atoms:</EM></B>
  <UL>
    <LI><B><EM>Swap_atoms</EM></B> will try to swap equivalent atoms to reduce the RMSD value. Sets of equivalent atoms can be selected from the drop down menu (defaults to <B><EM>All</EM></B> defined pairs). How to define or delete new pairs is explained in the <A HREF="http://physiology.med.cornell.edu/faculty/hweinstein/vmdplugins/swap/index.html">Swap</A> plugin webpage. You need to have the Swap plugin installed to see this options.
 It does not work with <EM>Align</EM>.
    <LI>The <B><EM>verbose</EM></B> option will print the out the status of the swapped atoms during the RMSD calculations.
    <LI>The <B><EM>List</EM></B> button will print out the current definitions.
  </UL>

  <LI><B><EM>Calculation type:</EM></B>
  <UL>
    <LI><B><EM>RMSD</EM></B> will calculate the RMSD using the reference molecule defined in <EM>Ref</EM> and the structures in the table as targets. Note that the <EM>RMSD</EM> button has to be pressed again to obtain the new RMSD values after the alignment.
    <LI><B><EM>Align</EM></B> will align the structures in the table using the molecule defined in <EM>Ref</EM> as reference. <EM>Align</EM> is not available if the <EM>All</EM> in the trajectory options is active or <EM>Average</EM> is used as reference.
  </UL>

  <LI><B><EM>Reference molecule:</EM></B>
  <UL>
     <LI><B><EM>Top</EM></B> will use the actual top molecule as reference (it doesn't need to be one included in the table).
     <LI><B><EM>Average</EM></B> will use the average structure calculated from all the molecules in the table (and all frames if <EM>trajectory</EM> is activated) as reference. It does not work for <EM>Align</EM> calculations.
     <LI><B><EM>Selected</EM></B> will use the molecule selected in the table as reference. If more than one molecule is selected, only the first one will be used as reference.
  </UL>

  <LI><B><EM>Trajectory options:</EM></B>
  <UL>
    <LI><B><EM>Trajectory</EM></B> activates options to include the frames of a molecule in the calculations.
    <LI><B><EM>Frame ref</EM></B> sets the frame of reference for the reference molecule. if the reference molecule is set to <EM>Average</EM>, all frames are used.
    <LI><B><EM>All</EM></B> activates the calculation of the RMSD of all frames in the selected structures against all frames in the reference molecule.
    <LI><B><EM>Skip</EM></B> allows to skip frames in a regular fashion, starting from <EM>Start</EM> and skipping every <EM>Steps</EM>.
    <LI><B><EM>Time</EM></B> activates the use of time units. <EM>Ini</EM> is the initial time, and <EM>Step</EM> is the time between frames. This changes will be reflected in the plot and the output file.
    <LI><B><EM>Plot</EM></B> will use the <EM>Multiplot VMD plugin</EM> (available in all systems), <EM>Xmgrace</EM> (only on unix) or <EM>MS Excel</EM> (only windows) to plot the data <EM>RMSD vs frame/time</EM>. This options is not available if the <EM>All</EM> option is on. The same plot can be obtained from the <EM>File</EM> menu. Xmgrace or MS Excel have to be installed on the system by the user. MS Excel needs the tcom tcl library (see <A HREF="#install">installation instructions</A>). VMD gives a warning message when exiting on windows systems if MS Excel is open with data from VMD, but you still can continue using MS Excel.
    <LI><B><EM>Save to file</EM></B> will save the data to the specified file. The format of the data depends on the status of the <EM>All</EM> option. If it is off, the format is a table in which each row represents a frame and each column a molecule or trajectory. If <EM>All</EM> is on, the data is a table in which each row represents the RMSD between the corresponding ref_mol/ref_frame and target_mol/target_frame pairs. If the trajectories have differing numbers of frames, <EM>NA</EM> (not available) is used. The data can also be saved from the <EM>File</EM> menu.

<TABLE align=center>
  <TR>
    <TD align=center><EM>All</EM> off</TD>
    <TD width=50></TD>
    <TD align=center><EM>All</EM> on</TD>
  </TR>
  <TR>
    <TD><PRE>
frame   mol 1   mol 2   mol 3
    0   0.652   2.828   0.652
    1      NA      NA   0.659
    2      NA      NA   0.674
    3      NA      NA   0.692
    4      NA      NA   0.722
    5      NA      NA   0.743
  ...     ...     ...     ...</PRE></TD>
    <TD></TD>
    <TD><PRE>
ref_mol ref_frame       mol     frame      rmsd
      0         0         1         0     0.652
      0         0         2         0     2.828
      0         0         3         0     0.652
      0         0         3         1     0.659
      0         0         3         2     0.674
      0         0         3         3     0.692
    ...       ...       ...       ...       ...</PRE></TD>
  </TR>
</TABLE>
  </UL>

  <LI><B><EM>Table of target molecules:</EM></B>
  This table shows the results by molecule. It presents the average, standard deviation, minimum, maximum and number of frames used (this number does not need to be the same as the number of frames in the molecule, since the reference molecule/frame is not included in the calculation). The <EM>Overall</EM> row shows the overall values as if all frames were independent of each other, i. e., it is not an average of the averages.
  <P>The following buttons can be used to add/remove molecules from the table:</P>
  <UL>
     <LI><B><EM>Erase all</EM></B> deletes all molecules from the list.
     <LI><B><EM>Erase selected</EM></B> deletes the selected molecule from the list.
     <LI><B><EM>Add all</EM></B> adds all molecules to the list.
     <LI><B><EM>Add active</EM></B> adds only the active molecules to the list.
  </UL>

</UL>
</DIV>

<H2><A NAME="download">Download</A></H2>

Send a mail to the <A HREF="#author">author</A> if you would like to be informed about new updates of this plugin.

<TABLE WIDTH=650 CLASS="plugin">
  <TR>
    <TD CLASS="vertit"><B><A NAME="last">version 2.01</A> (24 Apr '06)</B></TD>
      <TD CLASS="verdown">[<A HREF="http://physiology.med.cornell.edu/faculty/hweinstein/vmdplugins/rmsdtt/versions/rmsdtt-v2.01.tgz">download</A>]</TD>
  </TR><TR>
    <TD CLASS="verlog" COLSPAN=2>Change log:
  <UL>
    <LI>Using <EM>Average</EM> as the reference molecule was not working. Syntax of VMD command <EM>measure avpos</EM> updated (thanks to Christopher Lanci for reporting this bug).
  </UL></TD>
  </TR>
</TABLE>

<TABLE WIDTH=650 CLASS="plugin">
  <TR>
    <TD CLASS="vertit"><B>version 2.0 (3 Apr '06)</B></TD>
      <TD CLASS="verdown">[<A HREF="http://physiology.med.cornell.edu/faculty/hweinstein/vmdplugins/rmsdtt/versions/rmsdtt-v2.0.tgz">download</A>]</TD>
  </TR><TR>
    <TD CLASS="verlog" COLSPAN=2>Change log:
  <UL>
    <LI>Included in VMD 1.8.4.
    <LI>Complete rewrite to speed up the calculations, add Multiplot support and redesign the gui.
  </UL></TD>
  </TR>
</TABLE>

<P>Previous versions can be found <A HREF="http://physiology.med.cornell.edu/faculty/hweinstein/vmdplugins/rmsdtt/v1.html">here</A></P>

<H2><A NAME="install">Installation</A></H2>

<P>The RMSDTT plugin v2.0 has been included in the VMD distribution since VMD version 1.8.4. If you have a previous VMD version I recommend you to upgrade. If you still need the RMSDTT plugin in a previous VMD version or if you want to update to a most recent version of the RMSDTT plugin, follow this instructions:</P>

<OL>
<LI><B>Download</B> the plugin from <A HREF="#download">here</A> to the directory where you store your VMD plugins.
<LI>Add the following to your <B><EM>.vmdrc</EM></B> startup file (or create one) (for unix the path should be <EM>$HOME/.vmdrc</EM>, and for windows <EM>%USERPROFILE%\vmd.rc</EM>):
  <OL type="a">
  <LI><B>For VMD 1.8.4 and up</B> (will be used instead of the RMSDTT plugin version distributed with VMD 1.8.4):
<PRE>
set auto_path [linsert $auto_path 0 {/path/to/your/plugins/directory}]
</PRE>
  <LI><B>For VMD 1.8.3</B>
<PRE>
lappend auto_path {/path/to/your/plugins/directory}
vmd_install_extension rmsdtt rmsdtt_tk_cb "WMC PhysBio/RMSDTT"
</PRE>
  <LI><B>For VMD 1.8.2 and down</B>
<PRE>
lappend auto_path {/path/to/your/plugins/directory}
if { [catch "package require rmsdtt" msg] } {
  puts "VMD RMSDTT package could not be loaded:\n$msg"
} elseif { [catch {menu tk register "rmsdtt" rmsdtt} msg] } {
  puts "VMD RMSDTT could not be started:\n$msg"
}
</PRE>
  </OL>
<P>Remember to use the correct path to your plugins directory; i.e, if you saved the plugin in <EM>/home/user/myplugins</EM>, write that same path in the <EM>auto_path</EM> line.
<P><B>Note:</B> If you created the <EM>.vmdrc</EM> file, remember to add <B><EM>menu main on</EM></B> to get the main menu back.</P>
<LI>To be able to use <B>MS Excel on Windows</B> you will need the <EM>tcom tcl library</EM>. <A HREF="http://www.vex.net/~cthuang/tcom/">Download</A> the library and install it (i.e. in your plugins directories) (in general, only the <EM>tcom/lib/tcom</EM> directory is needed). Then add the following to your vmd.rc file:
<PRE>
lappend auto_path {/path/to/tcom/lib/tcom}
if { [catch "package require tcom" msg] } {
  puts "VMD tcom package could not be loaded:\n$msg"
}
</PRE>
<LI><B>Start</B> VMD. The RMSDTT plugin should be accessible from the <EM>Extensions menu</EM>.
</OL>

<H2><A NAME="author">Author</A></H2>

<EM>Luis Gracia, PhD
<BR>Weill Medical College, Cornell University
<BR>1300 York Ave, New York, 10021 NY</EM>

<P>Send comments and feedback to <A HREF="mailto:lug2002@med.cornell.edu">Luis Gracia</A>.</P>

</TD></TR>

<TR><TD CLASS="footer">Copyright &copy; 2004-2006, Weill Medical College of Cornell University. All Rights Reserved</TD></TR>

<TR><TD CLASS="address">
<ADDRESS>
<A HREF="mailto:lug2002@med.cornell.edu">Luis Gracia</A>
| last updated: Tuesday, 4 Apr 2006
<!--#config  timefmt="%A %e/%m/%y"--><!--#echo var="LAST_MODIFIED"-->
</ADDRESS>
</TD></TR>

</BODY>
</HTML>


<!--  LocalWords:  WMC Multiplot Phe min def noh webpage mol gui cb PhysBio NY
 -->
<!--  LocalWords:  VMD plugin RMSDTT plugins RMSD rmsd Xmgrace unix md xray Ini
 -->
<!--  LocalWords:  tcom tcl pkgIndex ifneeded rmsdtt dir USERPROFILE vmd rc tk
 -->
<!--  LocalWords:  lappend msg elseif Gracia Glu OE linsert
 -->
